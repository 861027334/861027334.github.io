"use strict";(self["webpackChunkjingdong"]=self["webpackChunkjingdong"]||[]).push([[523],{7420:function(t,s,a){a.d(s,{Z:function(){return v}});var n=a(3396),e=a(7139);const c={class:"shop"},o=["src"],i={class:"shop__content__title"},_={class:"shop__content__tags"},r={class:"shop__content__tag"},l={class:"shop__content__tag"},d={class:"shop__content__tag"},p={class:"shop__content__highlight"};function u(t,s,a,u,m,g){return(0,n.wg)(),(0,n.iD)("div",c,[(0,n._)("img",{class:"shop__img",src:a.item.imgUrl,alt:""},null,8,o),(0,n._)("div",{class:(0,e.C_)(["shop__content",{"shop__content--bordered":!a.hideBorder}])},[(0,n._)("div",i,(0,e.zw)(a.item.name),1),(0,n._)("div",_,[(0,n._)("span",r,"月售"+(0,e.zw)(a.item.sales),1),(0,n._)("span",l,"起送¥"+(0,e.zw)(a.item.expressLimit),1),(0,n._)("span",d,"基础运费¥"+(0,e.zw)(a.item.expressPrice),1)]),(0,n._)("div",p,(0,e.zw)(a.item.slogan),1)],2)])}var m={name:"ShopInfo",props:["item","hideBorder"]},g=a(89);const h=(0,g.Z)(m,[["render",u],["__scopeId","data-v-532fc664"]]);var v=h},4798:function(t,s,a){a.r(s),a.d(s,{default:function(){return nt}});var n=a(3396),e=a(9242);const c=t=>((0,n.dD)("data-v-447e5b5a"),t=t(),(0,n.Cn)(),t),o={class:"wrapper"},i={class:"top"},_={class:"top__back"},r=c((()=>(0,n._)("div",{class:"search"},[(0,n._)("span",{class:"iconfont"},""),(0,n._)("input",{type:"text",class:"search__input",placeholder:"请输入商品名称搜索"})],-1)));function l(t,s,a,c,l,d){const p=(0,n.up)("ShopInfo"),u=(0,n.up)("Content"),m=(0,n.up)("Cart"),g=(0,n.up)("Toast");return(0,n.wg)(),(0,n.iD)(n.HY,null,[(0,n._)("div",o,[(0,n._)("div",i,[(0,n._)("div",_,[(0,n._)("span",{class:"iconfont",onClick:s[0]||(s[0]=(...t)=>c.handleBackClick&&c.handleBackClick(...t))},"")]),r]),(0,n.wy)((0,n.Wm)(p,{item:c.data.item,"hide-border":!0},null,8,["item"]),[[e.F8,c.data.item.imgUrl]]),(0,n.Wm)(u),(0,n.Wm)(m)]),c.toastInfo.show?((0,n.wg)(),(0,n.j4)(g,{key:0,message:c.toastInfo.message},null,8,["message"])):(0,n.kq)("",!0)],64)}var d=a(4870),p=a(2483),u=a(6391),m=a(7420),g=a(7139);const h=t=>((0,n.dD)("data-v-4cef7d94"),t=t(),(0,n.Cn)(),t),v={class:"content"},f={class:"category"},w=["onClick"],I={class:"product"},k=["src"],C={class:"product__item__detail"},b={class:"product__item__title"},y={class:"product__item__sales"},z={class:"product__item__price"},D=h((()=>(0,n._)("span",{class:"product__item__yen"},"¥",-1))),L={class:"product__item__now"},j={class:"product__item__origin"},T={class:"product__number"},Z=["onClick"],B={class:"product__number__count"},S=["onClick"];function U(t,s,a,e,c,o){const i=(0,n.up)("Toast");return(0,n.wg)(),(0,n.iD)(n.HY,null,[(0,n._)("div",v,[(0,n._)("div",f,[((0,n.wg)(!0),(0,n.iD)(n.HY,null,(0,n.Ko)(e.categories,((t,s)=>((0,n.wg)(),(0,n.iD)("div",{class:(0,g.C_)(["category__item",{"category__item--active":e.currentTab===t.tab}]),key:s,onClick:s=>e.currentTab=t.tab},(0,g.zw)(t.name),11,w)))),128))]),(0,n._)("div",I,[((0,n.wg)(!0),(0,n.iD)(n.HY,null,(0,n.Ko)(t.contentList,(t=>((0,n.wg)(),(0,n.iD)("div",{class:"product__item",key:t._id},[(0,n._)("img",{class:"product__item__img",src:t.imgUrl,alt:""},null,8,k),(0,n._)("div",C,[(0,n._)("div",b,(0,g.zw)(t.name),1),(0,n._)("div",y,"月售"+(0,g.zw)(t.sales)+"件",1),(0,n._)("div",z,[D,(0,n._)("span",L,(0,g.zw)(t.price),1),(0,n._)("span",j,"¥"+(0,g.zw)(t.oldPrice),1)])]),(0,n._)("div",T,[(0,n._)("span",{class:"iconfont product__number__minus",onClick:s=>e.changeCartItemInfo(e.shopId,t._id,t,-1)},"",8,Z),(0,n._)("span",B,(0,g.zw)(e.cartList[e.shopId]?.[t._id]?.count||0),1),(0,n._)("span",{class:"iconfont product__number__plus",onClick:s=>e.changeCartItemInfo(e.shopId,t._id,t,1)},"",8,S)])])))),128))])]),e.toastInfo.show?((0,n.wg)(),(0,n.j4)(i,{key:0,message:e.toastInfo.message},null,8,["message"])):(0,n.kq)("",!0)],64)}a(7658);var q=a(65),H=a(2908);const Y=[{name:"全部商品",tab:"all"},{name:"秒杀",tab:"seckill"},{name:"新鲜水果",tab:"fruit"},{name:"休闲食品",tab:"snacks"},{name:"时令蔬菜",tab:"vegetable"},{name:"肉蛋家禽",tab:"meat"}],x=()=>{const t=(0,q.oR)(),{cartList:s}=(0,d.BK)(t.state),a=(s,a,n,e)=>{t.commit("changeCartItemInfo",{shopId:s,productId:a,productInfo:n,num:e})};return{cartList:s,changeCartItemInfo:a}};var F={name:"ContentView",components:{Toast:H.Z},setup(){const t=(0,d.iH)(Y[0].tab),s=(0,d.qj)({contentList:[]}),{toastInfo:a,showToast:e}=(0,H.S)(),c=(0,p.yj)(),o=c.params.id,i=async t=>{try{const a=await(0,u.U)(`/api/shop/${o}s/products`,{tab:t});if(0!==a.errno)return e(a.desc);s.contentList.push(...a.data)}catch(a){e(a.message)}};i(t.value),(0,n.YP)(t,(()=>{i(t.value)}));const{cartList:_,changeCartItemInfo:r}=x();return{categories:Y,toastInfo:a,currentTab:t,...(0,d.BK)(s),cartList:_,shopId:o,changeCartItemInfo:r}}},K=a(89);const P=(0,K.Z)(F,[["render",U],["__scopeId","data-v-4cef7d94"]]);var V=P;const W=t=>((0,n.dD)("data-v-40224dd2"),t=t(),(0,n.Cn)(),t),R={class:"cart"},$={class:"cart__icon"},A=W((()=>(0,n._)("img",{class:"cart__icon__img",src:"http://www.dell-lee.com/imgs/vue3/basket.png",alt:""},null,-1))),E={key:0,class:"cart__icon__tag"},G={class:"cart__info"},J={class:"cart__info__price"},M=W((()=>(0,n._)("div",{class:"cart__btn"},"去结算",-1)));function N(t,s,a,e,c,o){return(0,n.wg)(),(0,n.iD)("div",R,[(0,n._)("div",$,[A,t.total>0?((0,n.wg)(),(0,n.iD)("div",E,(0,g.zw)(t.total),1)):(0,n.kq)("",!0)]),(0,n._)("div",G,[(0,n.Uk)(" 总计："),(0,n._)("span",J,"¥"+(0,g.zw)(t.price),1)]),M])}const O=()=>{const t=(0,q.oR)(),s=(0,p.yj)(),a=s.params.id,e=t.state.cartList,c=(0,n.Fl)((()=>{const t=e[a];let s=0;for(const a in t){const n=t[a];s+=n.count}return s})),o=(0,n.Fl)((()=>{const t=e[a];let s=0;for(const a in t){const n=t[a];s+=n.price*n.count}return s.toFixed(2)}));return{total:c,price:o}};var Q={name:"CartView",setup(){return{...O()}}};const X=(0,K.Z)(Q,[["render",N],["__scopeId","data-v-40224dd2"]]);var tt=X,st={name:"ShopView",components:{ShopInfo:m.Z,Content:V,Cart:tt,Toast:H.Z},setup(){const t=(0,p.tv)(),s=(0,p.yj)(),a=(0,d.qj)({item:{}}),{toastInfo:n,showToast:e}=(0,H.S)(),c=async()=>{try{const t=await(0,u.U)(`/api/shop/${s.params.id}`);if(0!==t?.errno)return e(t.desc);a.item=t.data}catch(t){e(t.message)}};c();const o=()=>{t.back()};return{data:a,toastInfo:n,handleBackClick:o}}};const at=(0,K.Z)(st,[["render",l],["__scopeId","data-v-447e5b5a"]]);var nt=at}}]);
//# sourceMappingURL=shop.d5431ca1.js.map